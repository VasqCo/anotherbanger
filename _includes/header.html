<header id="site-header" style="background-color: var(--header-bg, #0c0c0c); color: #fff; padding: 0; text-align: left; position: fixed; top: 0; left: 0; width: 100%; margin: 0; z-index: 1000; --header-border: {{ page.header_border | default: site.header_border | default: '#ffffff' }}; --header-shadow: {{ page.header_shadow | default: site.header_shadow | default: '#00000080' }}; border-bottom: 2px solid var(--header-border); box-shadow: 0 6px 20px -8px var(--header-shadow);">
  <div class="header-inner">
    <h2 class="header-title threshold-header-title">
      <span class="header-logo-wrapper"></span>
      <a href="{{ '/' | relative_url }}" class="site-title-link">{{ site.title }}</a>
    </h2>
    <nav class="main-nav" style="flex: 1 0 auto; display: flex; align-items: center; min-height: 60px; position: relative;">
      <input type="checkbox" id="nav-toggle" class="nav-toggle" style="display:none;">
      <label for="nav-toggle" class="nav-toggle-label" style="display:none; color:#fff; background:none; border:none; padding:8px 16px; cursor:pointer; font-size:1em; border-radius: 6px;">â‰¡</label>
      <ul class="nav-list threshold-nav-list" style="max-width: none; list-style: none; margin: 0; display: flex; gap: 16px; align-items: center; padding: 0; line-height: 1;">
        {% assign sorted_pages = site.pages | sort: 'nav_order' %}
        {% for page in sorted_pages %}
          {% if page.title and page.permalink and page.title != '404: Page not found' %}
            <li style="display: inline; margin: 0; padding: 0; line-height: 1;"><a href="{{ page.url | relative_url }}" style="margin: 0; color: #fff; padding: 8px 12px; border-radius: 6px; display: inline-block; line-height: 1;">{{ page.title }}</a></li>
          {% endif %}
        {% endfor %}
      </ul>
      <style>
        .threshold-content ~ header .site-title-link,
        body:has(.threshold-content) .site-title-link {
          filter: brightness(0) invert(1);
        }

        .threshold-content ~ header .nav-list a,
        body:has(.threshold-content) .nav-list a,
        .threshold-content ~ header .nav-toggle-label,
        body:has(.threshold-content) .nav-toggle-label {
          filter: brightness(0) invert(1);
        }

        .threshold-content ~ header .header-logo-wrapper,
        body:has(.threshold-content) .header-logo-wrapper {
          filter: none !important;
        }
      </style>
    </nav>
</header>
<style>
  :root {
    --header-bg: #0c0c0c;
    --header-offset: 64px;
  }

  body {
    padding-top: var(--header-offset);
  }

  header {
    border-bottom-color: var(--header-border);
    box-shadow: 0 6px 20px -8px var(--header-shadow);
  }
  .header-inner {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
  min-height: 64px;
    padding: 0 40px;
    flex-wrap: nowrap;
    box-sizing: border-box;
  }
  .header-logo-wrapper {
    width: 40px;
    height: 40px;
    display: inline-block;
    margin-right: 8px;
    flex-shrink: 0;
    background-image: url("{{ '/favicon.png' | relative_url }}");
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
  }
  .header-title {
    color: #fff !important;
    margin: 0 !important;
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
    font-size: clamp(1.1rem, 1.5vw + 1rem, 1.7rem) !important;
    white-space: nowrap !important;
    min-width: 0 !important;
    flex: 1 1 320px !important;
    overflow: hidden !important;
    text-shadow: none !important;
    min-height: 64px;
    line-height: 1.2 !important;
    max-width: 100%;
    text-overflow: ellipsis;
    line-clamp: 1;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    word-break: normal;
  }
  .main-nav {
    display: flex;
    align-items: center;
  min-height: 64px;
    line-height: 1;
    margin-left: auto;
    justify-content: flex-end;
  }
  .site-title-link {
    color: #fff;
    text-decoration: none;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    min-width: 0;
    display: inline-block;
    max-width: 100%;
  }
  .site-title-link:hover {
    text-decoration: underline;
  }
  nav ul.nav-list {
    white-space: nowrap;
    padding: 0;
    margin: 0;
    line-height: 1;
  }
  nav ul li, nav ul li a {
    white-space: nowrap;
    line-height: 1;
    margin: 0;
    text-decoration: none;
  }
  nav ul li a:hover {
    text-decoration: underline;
  }
  .nav-toggle-label:hover {
    background: rgba(255, 255, 255, 0.15);
  }

  .main-nav .nav-list a:focus-visible {
    outline: 2px solid rgba(255, 255, 255, 0.6);
    outline-offset: -2px;
  }
  @media (max-width: 1000px) {
    .main-nav .nav-list {
      display: none !important;
      flex-direction: column;
      background: var(--header-bg, #0c0c0c);
      border: none;
      position: fixed;
      right: 0;
      left: auto;
      top: calc(var(--header-offset) - 2px);
      width: fit-content;
      min-width: 220px;
      max-width: calc(100vw - 16px);
      padding: 4px 0;
      box-sizing: border-box;
      max-height: calc(100vh - var(--header-offset));
      overflow-y: auto;
      overflow-x: hidden;
      z-index: 1100;
      border-radius: 0;
      text-align: left;
    }
    .main-nav .nav-list::before { display: none; }
    .main-nav .nav-list li {
      width: 100%;
      margin: 0;
    }
    .main-nav .nav-list li a {
      text-align: left;
      display: block;
      width: 100%;
      padding: 12px 18px;
      margin: 0;
      border-radius: 0;
      position: relative;
      overflow: hidden;
      white-space: nowrap;
      word-break: normal;
      border-bottom: 1px solid rgba(255, 255, 255, 0.06);
    }
    .main-nav .nav-list li a:hover {
      text-decoration: underline;
    }
    .main-nav .nav-list li:first-child a,
    .main-nav .nav-list li:last-child a {
      border-radius: 0;
    }
    .main-nav .nav-toggle-label {
      display: block !important;
    }
    .main-nav .nav-toggle:checked + .nav-toggle-label + .nav-list {
      display: flex !important;
    }
    .header-inner {
      padding: 0 16px;
      min-height: 64px;
    }

    .nav-toggle-label {
      display: block !important;
      position: absolute;
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      z-index: 1102;
    }

    .header-title {
      min-width: 0 !important;
      overflow: hidden !important;
      padding-right: 48px;
    }

    .header-title .site-title-link {
      display: block;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      max-width: 100%;
    }
  }
</style>
<script>
  (function() {
    const updateHeaderOffset = () => {
      const headerEl = document.getElementById('site-header');
      if (!headerEl) {
        return;
      }
      document.documentElement.style.setProperty('--header-offset', `${headerEl.offsetHeight}px`);
    };
    window.addEventListener('resize', updateHeaderOffset, { passive: true });
    window.addEventListener('load', updateHeaderOffset, { passive: true });
    document.addEventListener('DOMContentLoaded', updateHeaderOffset);
    updateHeaderOffset();
  })();
</script>